% Muti Metroo User Manual - LaTeX Header
% This file is included via --include-in-header in Pandoc

% Default values for version and date (overridden by pandoc -V options)
\providecommand{\docversion}{dev}
\providecommand{\builddate}{\today}

% Additional packages
\usepackage{graphicx}
\usepackage{xcolor}
\usepackage{tikz}
\usepackage{tcolorbox}
\usepackage{booktabs}
\usepackage{longtable}

% Scale images to fit page width while keeping aspect ratio
\makeatletter
\def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth\else\Gin@nat@width\fi}
\def\maxheight{\ifdim\Gin@nat@height>0.7\textheight 0.7\textheight\else\Gin@nat@height\fi}
\makeatother
\setkeys{Gin}{width=\maxwidth,height=\maxheight,keepaspectratio}

% Define colors - Mole-inspired warm orange/tan theme (matches Docusaurus site)
\definecolor{primarycolor}{RGB}{196, 136, 58}    % #c4883a - warm orange/tan
\definecolor{primarydark}{RGB}{176, 122, 52}     % #b07a34 - darker variant
\definecolor{linkcolor}{RGB}{160, 107, 45}       % #a06b2d - link color
\definecolor{darkgray}{RGB}{61, 61, 61}          % #3d3d3d - text color
\definecolor{lightgray}{RGB}{240, 240, 240}
\definecolor{codebg}{RGB}{248, 248, 248}
\definecolor{warnbg}{RGB}{255, 243, 205}
\definecolor{warnborder}{RGB}{255, 193, 7}

% Code block styling
\tcbuselibrary{listings,skins,breakable}

% Suppress minor overfull hbox warnings (up to 10pt)
% These are cosmetic and don't significantly affect readability
\hfuzz=10pt

% Custom title page
\makeatletter
\renewcommand{\maketitle}{%
  \begin{titlepage}
    \centering
    \vspace*{1cm}

    % Logo
    \includegraphics[width=3cm]{logo.png}

    \vspace{1cm}

    % Title
    {\fontsize{36}{43}\selectfont\bfseries\color{primarycolor} Muti Metroo\par}
    \vspace{0.5cm}
    {\fontsize{24}{29}\selectfont\bfseries User Manual\par}

    \vspace{1.5cm}

    % Subtitle
    {\Large\color{darkgray} Userspace Mesh Networking Agent\par}

    \vspace{0.8cm}

    % Decorative line
    \noindent\makebox[\linewidth]{\color{primarycolor}\rule{0.5\paperwidth}{1pt}}

    \vfill

    % Version and date (set via pandoc variables)
    {\large Version \docversion\par}
    \vspace{0.3cm}
    {\large Built: \builddate\par}

    \vspace{1.5cm}

    % Organization
    {\normalsize\color{darkgray} Postal Systems OÜ\par}

    \vspace{2cm}
  \end{titlepage}
}
\makeatother

% Chapter styling
\usepackage{titlesec}
\titleformat{\chapter}[display]
  {\normalfont\huge\bfseries\color{primarycolor}}
  {\chaptertitlename\ \thechapter}
  {20pt}
  {\Huge}

% Section styling
\titleformat{\section}
  {\normalfont\Large\bfseries\color{primarycolor}}
  {\thesection}
  {1em}
  {}

\titleformat{\subsection}
  {\normalfont\large\bfseries}
  {\thesubsection}
  {1em}
  {}

% Table styling
\renewcommand{\arraystretch}{1.3}

% Remove paragraph indentation
\setlength{\parindent}{0pt}
\setlength{\parskip}{0.5em}

% Hyperref styling (must be loaded last in preamble)
\AtBeginDocument{%
  \hypersetup{
    colorlinks=true,
    linkcolor=linkcolor,
    urlcolor=linkcolor,
    citecolor=linkcolor,
    pdfauthor={Postal Systems OÜ},
    pdftitle={Muti Metroo User Manual},
    pdfsubject={Userspace Mesh Networking Agent}
  }
}
